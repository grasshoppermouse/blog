<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.340">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Ed Hagen">
<meta name="dcterms.date" content="2015-04-19">

<title>Grasshoppermouse - Is pregnancy immunosuppression a myth?</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="Grasshoppermouse - Is pregnancy immunosuppression a myth?">
<meta property="og:description" content="">
<meta property="og:site-name" content="Grasshoppermouse">
<meta name="twitter:title" content="Grasshoppermouse - Is pregnancy immunosuppression a myth?">
<meta name="twitter:description" content="">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Grasshoppermouse</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">Ed Hagen</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/ed_hagen" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Is pregnancy immunosuppression a myth?</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">science</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Ed Hagen </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">April 19, 2015</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>My grad student Caity Placek is working on behavioral immunity during pregnancy. Behavioral immunity refers to psychological adaptations that help defend against pathogens; avoidance of sick people would be a possible example.</p>
<p>Caity’s results suggest that aversion to meat in pregnancy is related to infection risk, especially in the first trimester. This supports an influential hypothesis put forward in 2000 by Flaxman and Sherman that these aversions are due to the immunosuppression that also occurs early in pregnancy. The rationale is that, during human evolution, meat often harbored pathogens, so immunosuppressed pregnant women should have evolved to avoid it.</p>
<p>The idea that pregnant women are immunosuppressed originated with Peter Medawar, who won a Nobel prize for his work on tissue grafts. In 1953, Medawar pointed out that the fetus was like an organ transplant: with half of its genes coming from dad, it produced many proteins that were foreign to mom. Why, then, didn’t mom’s immune system attack the fetus as it would a transplanted organ? In an article billed as “the most influential contribution made to the development of the field of Reproductive Immunology” (Billington 2003), Medawar asked</p>
<blockquote class="blockquote">
<p>The immunological problem of pregnancy may be formulated thus: how does the pregnant mother contrive to nourish within itself, for many weeks or months, a foetus that is an antigenically foreign body?</p>
</blockquote>
<p>For the next 40 years, much research on this “immunological paradox” was conducted as if the fetal ‘allograft’ were like a surgically transplanted organ (Erlebacher 2013). One solution to the paradox offered by Medawar was “the immunological indolence or inertness of the [pregnant] mother.” In other words, to avoid rejecting the fetus as they would a transplanted kidney, pregnant women were naturally immunosuppressed.</p>
<p>A more recent variant of this hypothesis involved the Th1-Th2 paradigm, in which Th1 cells express proinflammatory cytokines, whereas Th2 cells secrete cytokines promoting humoral immunity, and either pathway can down-regulate the other. The pregnancy state was thought to be a Th2 biased state, to avoid an inflammatory response to the fetus.</p>
<p>But are pregnant women immunosuppressed, or in a Th2 biased state? When Caity and I started looking into the literature on pregnancy immunosuppression, we found that opinion seems to have shifted dramatically since 2000. Recent reviews on the topic in the New England Journal of Medicine and the American Journal of Reproductive Immunology are heaping skepticism on the idea that pregnant women are immunosuppressed. For instance, Racicot et al.&nbsp;(2014), writing in the American Journal of Reproductive Immunology, state that</p>
<blockquote class="blockquote">
<p>The old concept that pregnancy is associated with immune suppression has created a myth of pregnancy as a state of immunological weakness and therefore of increased susceptibility to infectious diseases. Today, there is increasing evidence suggesting that this concept is incorrect and the immune system during pregnancy is functional and highly active.</p>
</blockquote>
<p>In the same journal, Silasi et al.&nbsp;(2015) write</p>
<blockquote class="blockquote">
<p>One of the main hypotheses used to explain the increased risk for infection and mortality during pregnancy has been the concept of ‘pregnancy as an immune-suppressed condition’. The ‘paradox of pregnancy’ as a semi-allograft has been approached from the point of perspective of organ transplantation. The view of the fetus as an organ transplant, and the requirement of systemic immune suppression for the success of the transplant, led to the proposal of pregnancy as a condition of systemic immune suppression as a requirement for the success of the pregnancy. From this point of view, similarly as in immune-suppressed patients, pregnancy is in a state of weak immunologic protection.</p>
</blockquote>
<blockquote class="blockquote">
<p>This concept has been tested for many years in animal models as well as in patients with fertility problems. Unfortunately, after almost 50 years of research following this assumption, there is a lack of evidence to support this hypothesis.</p>
</blockquote>
<p>Writing in the New England Journal of Medicine, Kourtis et al.&nbsp;(2014) similarly conclude</p>
<blockquote class="blockquote">
<p>Elucidation of the immunologic alterations and adaptations that occur during pregnancy suggests that older concepts of pregnancy as a state of systemic immunosuppression are oversimplified. A more useful model may be the view of pregnancy as a modulated immunologic condition, not a state of immunosuppression.</p>
</blockquote>
<p>The evidence against systemic (emphasis on <em>systemic</em>) immunosuppression in pregnancy is pretty compelling.</p>
<p>There is little epidemiological evidence that pregnant women are more vulnerable to infection. In a review of pregnancy and infection, Kourtis et al.&nbsp;(2014) state “The fact that pregnant women do not seem, on the basis of epidemiologic evidence, to be more susceptible to infections in general also contradicts [the pregnancy immunosuppression] theory.” Keeping in mind that, for some infectious diseases, there are national and global surveillance programs involving millions of patients, and that public health researchers are particularly concerned about infections during pregnancy, this is a powerful blow to the theory.</p>
<p>My first thought was that maybe behavioral immunity compensates for immunosuppression, but no, pregnant women respond well to vaccines: “Adequate immunologic responses to vaccination in pregnant women have been demonstrated in several studies and for several pathogens” (Kourtis et al.&nbsp;2014), and these responses do not appear to depend significantly on trimester (Pazos et al.&nbsp;2012).</p>
<p>Further, researchers find that the immune system is “functional and highly active” during pregnancy (Racicot et al.&nbsp;2014). And pregnant women’s immune systems do detect and respond to the fetus. The title of this paper says it all: <em>Fetal-Specific CD8+ Cytotoxic T Cell Responses Develop during Normal Human Pregnancy and Exhibit Broad Functional Capacity</em> (Lissauer et al.&nbsp;2012).</p>
<p>What changed?</p>
<p>First, it is now recognized that many shifts in immunity during pregnancy are specific to the maternal-fetal interface (the uterus and placenta), and these must be clearly distinguished from systemic immune changes. In fact, the Th1-Th2 model of pregnancy was based mostly on studies of the maternal-fetal interface, and might not apply to systemic immunity (Pazos et al.&nbsp;2012):</p>
<blockquote class="blockquote">
<p>Most evidence supporting a Th2 shifts derives from studies of [the maternal/fetal] interface rather than systemic immunity. Although inflammatory events have been shown to be important at critical times at the beginning and end of gestation, for the most part, the uterine environment is biased toward Th2 [34]. Arguments for a Th2 bias in the periphery are much more contentious [35].</p>
</blockquote>
<p>Second, the fetus and placenta are now seen as an active players that generally cooperate with the maternal immune system to provide immunity during pregnancy (Mor et al.&nbsp;2010).</p>
<p>Third, earlier views were heavily influenced by studies of pregnancy complications and loss in humans, as well as mouse models, which might not translate to immune responses during healthy human pregnancies.</p>
<p>What didn’t change?</p>
<p>How the mother tolerates the semiallogeneic fetus is still seen as an important and not fully understood problem.</p>
<p>Although pregnant women are generally not more susceptible to infection, there is solid evidence that if they do become infected, the consequences are more severe. Infections with influenza, hepatitis E virus, herpes simplex virus, malaria, measles, smallpox, HIV, varicella, and coccidioidomycosis are all more severe in pregnant women (Kourtis et al.&nbsp;2014).</p>
<p>Pregnant women do seem to be more susceptible to infection with a few pathogens, in particular malaria and listeriosis (Kourtis et al.&nbsp;2014). Listeriosis is a food borne bacteria, often found on raw dairy products and meat. Hmmm.</p>
<p>There are shifts in immunity during pregnancy. A recent longitudinal study of healthy pregnancies, for example, found that “pregnancy is not a period of immunosuppression but an alteration in immune priorities characterized by a strengthening of innate immune barriers and a concomitant reduction in adaptive/inflammatory immunity in the later stages of pregnancy” (Kraus et al.&nbsp;2012).</p>
<p>Where does this leave Caity? And Flaxman and Sherman? Here are a few obvious possible reinterpretations.</p>
<p>In the &gt;100 million years since the evolution of viviparity, sophisticated (but not infallible) mechanisms have evolved in both mother and fetus to allow the immune system to be fully active against pathogens without jeopardizing the fetus. Many of these mechanisms are localized to the uterine environment.</p>
<p>Pregnant women might have evolved an aversion to meat, not because they are more vulnerable to infection, but because the <em>costs</em> of infection are higher during pregnancy. It is also possible that some pregnancy-related aversions are specific to particular pathogens that do more easily infect pregnant women.</p>
<p>Pregnancy-related shifts in immunity imply shifts in trade-offs: improvements to some aspects of immunity but detriments to others. These might be related to the energetic cost of pregnancy, to the challenges of a semiallogeneic fetus, and/or to the need for placental, fetal, and maternal immune mechanisms to coordinate. Perhaps, <em>a la</em> Haig, there are conflicts with paternal genes that pose special challenges.</p>
<p>Finally, there are still many unknowns and much debate. To give the last word to Medawar, he believed the key factor ensuring the success of gestation was not maternal immunosuppression but rather “the anatomical separation of foetus from mother,” a basic conclusion that, according to Billington (2003), remains substantially valid to this day.</p>
<section id="references" class="level1">
<h1>References</h1>
<p>Billington, W. D. (2003). The immunological problem of pregnancy: 50 years with the hope of progress. A tribute to Peter Medawar. Journal of Reproductive Immunology, 60(1), 1–11. <a href="http://doi.org/10.1016/S0165-0378(03)00083-4" class="uri">http://doi.org/10.1016/S0165-0378(03)00083-4</a></p>
<p>Erlebacher, A. (2013). Mechanisms of T cell tolerance towards the allogeneic fetus. Nature Reviews Immunology, 13(1), 23–33. <a href="http://doi.org/10.1038/nri3361" class="uri">http://doi.org/10.1038/nri3361</a></p>
<p>Flaxman, S. M., &amp; Sherman, P. W. (2000). Morning Sickness: A Mechanism for Protecting Mother and Embryo. The Quarterly Review of Biology, 75(2), 113–148. <a href="http://doi.org/10.2307/2664252" class="uri">http://doi.org/10.2307/2664252</a></p>
<p>Kourtis, A. P., Read, J. S., &amp; Jamieson, D. J. (2014). Pregnancy and Infection. New England Journal of Medicine, 370(23), 2211–2218. <a href="http://doi.org/10.1056/NEJMra1213566" class="uri">http://doi.org/10.1056/NEJMra1213566</a></p>
<p>Lissauer, D., Piper, K., Goodyear, O., Kilby, M. D., &amp; Moss, P. A. H. (2012). Fetal-Specific CD8+ Cytotoxic T Cell Responses Develop during Normal Human Pregnancy and Exhibit Broad Functional Capacity. The Journal of Immunology, 189(2), 1072–1080. <a href="http://doi.org/10.4049/jimmunol.1200544" class="uri">http://doi.org/10.4049/jimmunol.1200544</a></p>
<p>Medawar, P. B. (1953, January). Some immunological and endocrinological problems raised by the evolution of viviparity in vertebrates. In Symp Soc Exp Biol (Vol. 7, No.&nbsp;320, p.&nbsp;38).</p>
<p>Mor, G., &amp; Cardenas, I. (2010). The Immune System in Pregnancy: A Unique Complexity: IMMUNE SYSTEM IN PREGNANCY. American Journal of Reproductive Immunology, 63(6), 425–433. <a href="http://doi.org/10.1111/j.1600-0897.2010.00836.x" class="uri">http://doi.org/10.1111/j.1600-0897.2010.00836.x</a></p>
<p>Pazos, M., Sperling, R. S., Moran, T. M., &amp; Kraus, T. A. (2012). The influence of pregnancy on systemic immunity. Immunologic Research, 54(1-3), 254–261. <a href="http://doi.org/10.1007/s12026-012-8303-9" class="uri">http://doi.org/10.1007/s12026-012-8303-9</a></p>
<p>Placek, C. (2015) Fetal protection: The roles of social learning and innate food aversions in South India. The International Society for Evolution, Medicine, &amp; Public Health Inaugural Meeting, March 19-21, 2015 in Tempe, Arizona.</p>
<p>Racicot, K., Kwon, J.-Y., Aldo, P., Silasi, M., &amp; Mor, G. (2014). Understanding the Complexity of the Immune System during Pregnancy. American Journal of Reproductive Immunology, 72(2), 107–116. <a href="http://doi.org/10.1111/aji.12289" class="uri">http://doi.org/10.1111/aji.12289</a></p>
<p>Silasi, M., Cardenas, I., Kwon, J.-Y., Racicot, K., Aldo, P., &amp; Mor, G. (2015). Viral Infections During Pregnancy. American Journal of Reproductive Immunology, 73(3), 199–213. <a href="http://doi.org/10.1111/aji.12355" class="uri">http://doi.org/10.1111/aji.12355</a></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>